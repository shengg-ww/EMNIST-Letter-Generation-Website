{% extends "layout.html" %}

{% block content %}
<div class="history-container container mt-5">
    <h1 class="page-title">Prediction History for {{ username }}</h1>

    {% if entries %}
    <div class="card-grid">
        {% for entry in entries %}
        <div class="prediction-card">
            <!-- Display the image -->
            <img src="data:image/png;base64,{{ entry.image_data }}" 
                 class="prediction-image" 
                 alt="Generated Letter {{ entry.letter }}">

            <div class="card-content">
                <div class="card-header">  
                    <div class="row">
                      <div class="col-3">
                            <!-- Favorite Button -->
                        <form action="{{ url_for('toggle_favorite', entry_id=entry.id) }}" method="POST" class="favorite-form">
                            <button type="submit" class="favorite-btn" title="Mark as Favorite">
                                {% if entry.is_favorite %}
                                    <i class="fa-solid fa-star favorited"></i>  <!-- Filled star if favorite -->
                                {% else %}
                                    <i class="fa-regular fa-star"></i>  <!-- Outlined star if not favorite -->
                                {% endif %}
                            </button>
                        </form> 
                    </div>
                        <div class="col-9">
                            <h5 class="prediction-letter">Generated Letter: {{ entry.letter }}</h5>
                        </div>
              
                </div>
               </div>
              
                <p class="prediction-date">Generated on: {{ entry.timestamp }}</p>
    
            
                <!-- Delete Button -->
                <form action="{{ url_for('remove_entry', entry_id=entry.id) }}" method="POST">
                    <button type="submit" class="delete-btn">
                        <i class="fa-solid fa-trash"></i> Delete
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <h2>No prediction history available</h2>
        <p>Your predictions will appear here once generated.</p>
    </div>
    {% endif %}
</div>
{% endblock %}
