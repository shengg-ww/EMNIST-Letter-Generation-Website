{% extends "layout.html" %}
{% block content %}

<div class="login-container">
    <h2 class="login-title text-center">Login</h2>
    <form method="post" action="{{ url_for('login') }}" class="w-100" id="login-form">
        {{ form.hidden_tag() }}

        <!-- Username Field -->
        <div class="mb-4 login-group">
            {{ form.username.label(class="login-label") }}
            {{ form.username(class="login-input", placeholder="Enter your username") }}
            {% for error in form.username.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Password Field -->
        <div class="mb-4 login-group">
            {{ form.password.label(class="login-label") }}
            {{ form.password(class="login-input", placeholder="Password") }}
            {% for error in form.password.errors %}
                <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>

        <!-- Forgot Password -->
        <div class="mb-4">
            <a href="/forget_password" class="text-primary">Forgot Password?</a>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn w-100 mb-4 user-button" id="login-button">
            <span id="login-text">{{ form.submit.label.text }}</span>
            <span id="login-spinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
        </button>

        <!-- Register Link -->
        <p class="text-center mt-3">
            Don't have an account? <a href="/register">Register now</a>
        </p>
    </form>
</div>

<script>
document.getElementById("login-form").addEventListener("submit", function() {
    let loginButton = document.getElementById("login-button");
    let loginText = document.getElementById("login-text");
    let loginSpinner = document.getElementById("login-spinner");

    // Disable the button and show the spinner
    loginButton.disabled = true;
    loginText.classList.add("d-none");
    loginSpinner.classList.remove("d-none");
});
</script>

{% endblock %}
